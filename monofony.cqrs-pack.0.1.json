{
    "manifests": {
        "monofony/cqrs-pack": {
            "manifest": {
                "copy-from-recipe": {
                    "config/": "%CONFIG_DIR%/",
                    "src/": "%SRC_DIR%/"
                }
            },
            "files": {
                "config/packages/monofony_cqrs.yaml": {
                    "contents": [
                        "framework:",
                        "    messenger:",
                        "        default_bus: 'command.bus'",
                        "        buses:",
                        "            command.bus: null",
                        "            query.bus: null",
                        ""
                    ],
                    "executable": false
                },
                "src/Shared/Application/Command/CommandBusInterface.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "namespace App\\Shared\\Application\\Command;",
                        "",
                        "interface CommandBusInterface",
                        "{",
                        "    public function dispatch(CommandInterface $command): mixed;",
                        "}",
                        ""
                    ],
                    "executable": false
                },
                "src/Shared/Application/Command/CommandHandlerInterface.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "namespace App\\Shared\\Application\\Command;",
                        "",
                        "use Symfony\\Component\\DependencyInjection\\Attribute\\AutoconfigureTag;",
                        "",
                        "#[AutoconfigureTag(",
                        "    name: 'messenger.message_handler',",
                        "    attributes: [",
                        "        'bus' => 'command.bus',",
                        "    ],",
                        ")]",
                        "interface CommandHandlerInterface",
                        "{",
                        "}",
                        ""
                    ],
                    "executable": false
                },
                "src/Shared/Application/Command/CommandInterface.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "namespace App\\Shared\\Application\\Command;",
                        "",
                        "interface CommandInterface",
                        "{",
                        "}",
                        ""
                    ],
                    "executable": false
                },
                "src/Shared/Application/Query/QueryBusInterface.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "namespace App\\Shared\\Application\\Query;",
                        "",
                        "interface QueryBusInterface",
                        "{",
                        "    public function ask(QueryInterface $query): mixed;",
                        "}",
                        ""
                    ],
                    "executable": false
                },
                "src/Shared/Application/Query/QueryHandlerInterface.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "namespace App\\Shared\\Application\\Query;",
                        "",
                        "use Symfony\\Component\\DependencyInjection\\Attribute\\AutoconfigureTag;",
                        "",
                        "#[AutoconfigureTag(",
                        "    name: 'messenger.message_handler',",
                        "    attributes: [",
                        "        'bus' => 'query.bus',",
                        "    ],",
                        ")]",
                        "interface QueryHandlerInterface",
                        "{",
                        "}",
                        ""
                    ],
                    "executable": false
                },
                "src/Shared/Application/Query/QueryInterface.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "namespace App\\Shared\\Application\\Query;",
                        "",
                        "interface QueryInterface",
                        "{",
                        "}",
                        ""
                    ],
                    "executable": false
                },
                "src/Shared/Infrastructure/Symfony/Messenger/MessengerCommandBus.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "namespace App\\Shared\\Infrastructure\\Symfony\\Messenger;",
                        "",
                        "use App\\Shared\\Application\\Command\\CommandBusInterface;",
                        "use App\\Shared\\Application\\Command\\CommandInterface;",
                        "use Symfony\\Component\\Messenger\\Exception\\HandlerFailedException;",
                        "use Symfony\\Component\\Messenger\\HandleTrait;",
                        "use Symfony\\Component\\Messenger\\MessageBusInterface;",
                        "",
                        "final class MessengerCommandBus implements CommandBusInterface",
                        "{",
                        "    use HandleTrait;",
                        "",
                        "    public function __construct(MessageBusInterface $commandBus)",
                        "    {",
                        "        $this->messageBus = $commandBus;",
                        "    }",
                        "",
                        "    public function dispatch(CommandInterface $command): mixed",
                        "    {",
                        "        try {",
                        "            return $this->handle($command);",
                        "        } catch (HandlerFailedException $e) {",
                        "            /** @var array{0: \\Throwable} $exceptions */",
                        "            $exceptions = $e->getWrappedExceptions();",
                        "",
                        "            throw reset($exceptions);",
                        "        }",
                        "    }",
                        "}",
                        ""
                    ],
                    "executable": false
                },
                "src/Shared/Infrastructure/Symfony/Messenger/MessengerQueryBus.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "namespace App\\Shared\\Infrastructure\\Symfony\\Messenger;",
                        "",
                        "use App\\Shared\\Application\\Query\\QueryBusInterface;",
                        "use App\\Shared\\Application\\Query\\QueryInterface;",
                        "use Symfony\\Component\\Messenger\\Exception\\HandlerFailedException;",
                        "use Symfony\\Component\\Messenger\\HandleTrait;",
                        "use Symfony\\Component\\Messenger\\MessageBusInterface;",
                        "",
                        "final class MessengerQueryBus implements QueryBusInterface",
                        "{",
                        "    use HandleTrait;",
                        "",
                        "    public function __construct(MessageBusInterface $queryBus)",
                        "    {",
                        "        $this->messageBus = $queryBus;",
                        "    }",
                        "",
                        "    public function ask(QueryInterface $query): mixed",
                        "    {",
                        "        try {",
                        "            return $this->handle($query);",
                        "        } catch (HandlerFailedException $e) {",
                        "            /** @var array{0: \\Throwable} $exceptions */",
                        "            $exceptions = $e->getWrappedExceptions();",
                        "",
                        "            throw reset($exceptions);",
                        "        }",
                        "    }",
                        "}",
                        ""
                    ],
                    "executable": false
                }
            },
            "ref": "136c970f8fe165ea06b31c5ca189d51e9de0b916"
        }
    }
}
